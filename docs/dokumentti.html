<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<!-- saved from url=(0062)http://www.hut.fi/~t106213/mallipohjat/projektidokumentti.html -->
<HTML lang=fi><HEAD><TITLE>T-106.213 projektityˆn dokumentti</TITLE>
<META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<META content="noindex, nofollow" name=robots>
<META content="Microsoft FrontPage 5.0" name=GENERATOR></HEAD>
<BODY text=#000000 vLink=#5555bb link=#0000ff bgColor=#ffffff>
<TABLE cellSpacing=0 cellPadding=0 width="90%" align=center border=0>
  <TBODY>
  <TR vAlign=top align=left>
    <TD>
      <H3><font face="Arial Narrow">T-106.213 projektityˆn dokumentti</font></H3>
      <p><font size="6" face="Arial Narrow"><b>Ristinolla</b></font></p><P><font face="Arial Narrow" size="3">Tuukka
      Sarvi (tsarvi@cc.hut.fi), 57679S, S I</font></P>
      <P><font face="Arial Narrow">P‰ivitetty 8.1.2003</font></P>
      <H3>&nbsp;</H3>
      <H3><font face="Arial Narrow">Yleiskuvaus</font></H3><p>
      <font face="Arial Narrow">Toteuttamani peli
      on perinteinen ristinolla, jossa tavoitteena on saada aikaan viiden
      per‰kk‰isen rastin tai renkaan suora ruudukolle.</font></p><p>
      <font face="Arial Narrow">Peli on pyritty
      tekem‰‰n siten, ett‰ se toteuttaa vaikean vaatimustason
      kriteerit.&nbsp; Peli toteuttaa ensisijaisesti teht‰v‰nannon (c)-kohdan
      vaatimukset.</font></p><p><font face="Arial Narrow">Pelin t‰rkeimm‰t ominaisuudet (teht‰v‰nantoa
      mukaillen) ovat seuraavat:</font></p>
      <ul>
        <li><font face="Arial Narrow">Mahdollisuus pelata j‰tk‰nshakkia joko kaksinpelin‰ tai
          yksinpelin‰ tietokonevastustajaa vastaan.</font></li>
        <li><font face="Arial Narrow">Ohjelma ilmoittaa pelin p‰‰ttyneeksi kun toinen pelaajista on
          saanut muodostettua viiden suoransa tai, kun kumpikaan ei voi en‰‰
          voittaa laudan rajallisen koon takia.</font></li>
        <li><font face="Arial Narrow">Kohtalainen tietokonevastustaja (Niilo Neuvokas).</font></li>
        <li><font face="Arial Narrow">Mahdollisuus tallentaa pelitilanne halutun nimiseen tiedostoon ja
          jatkaa sit‰ myˆhemmin lataamalla peli tiedostosta.</font></li>
        <li><font face="Arial Narrow">Mahdollisuus selata peli‰ yksi siirto kerrallaan pelin alusta
          loppuun asti.&nbsp;</font></li>
        <li><font face="Arial Narrow">Graafinen k‰yttˆliittym‰, jota jokainen Windowsia k‰ytt‰nyt
          osaa k‰ytt‰‰, ja joka osaa reagoida useimpiin virhetilanteisiin.</font></li>
      </ul>
      <H3>&nbsp;</H3>
      <H3><font face="Arial Narrow">K‰yttˆohje</font></H3>
      <P><font face="Arial Narrow">Ohjelma k‰ynnistet‰‰n tarvittavat 
      luokkatiedostot sis‰lt‰v‰ss‰ hakemistossa komennolla: java Ristinolla. 
      T‰m‰n seurauksena ruutuun pit‰isi avautua, k‰yttˆj‰rjestelm‰st‰ riippuen, 
      jotakuinkin alla olevan n‰kˆinen ikkuna.</font></P>
      <P align="center"><img border="0" src="paaikkuna.gif" width="411" height="333"></P>
      <P><font face="Arial Narrow">Pelin p‰‰ikkunassa on kolme eri 
      toimintokokonaisuutta: peliruudukko, siirtojen selausnapit ja yl‰valikko. 
      Peliruudukon ruutuja painamalla pelaaja(t) voivat tehd‰ haluamansa 
      siirron. Kun jotain ruutua painaa, sen paikalle ilmestyy joko rasti tai 
      rengas, riippuen siit‰ kumpi pelaaja oli vuorossa. T‰m‰n lis‰ksi ruutu 
      menee disabled-tilaan, jolloin sit‰ ei voi en‰‰ painaa saman pelin aikana. 
      Kun pelaaja on jotain ruutua painamalla tehnyt siirtonsa, siirtyy vuoro 
      seuraavalle pelaajalle.</font></P>
      <P><font face="Arial Narrow">Siirtojen selausnapit, eli ikkunan 
      alareunassa olevat kaksi nuoli-ikoneilla varustettua nappia, 
      mahdollistavat siirtojen selaamisen eteen- ja taaksep‰in. Nuoli vasemmalle 
      siirt‰‰ pelitilannetta yhden siirron taaksep‰in ja nuoli oikealle siirt‰‰ 
      pelitilannetta vastaavasti yhden siirron eteenp‰in. K‰ytt‰j‰n
      selatessa siirtoja 
      taaksep‰in peliruudukon napit menev‰t disabled-tilaan est‰en siirtojen 
      tekemisen muualla kuin nykyisess‰ pelitilanteessa. </font></P>
      <P><font face="Arial Narrow">Yl‰valikossa on kaksi osaa: Peli ja Ohje. 
      Peli-kohta sis‰lt‰‰ valinnat: Uusi peli, Avaa peli, Tallenna peli ja 
      Lopeta. Ohje sis‰lt‰‰ vain yhden valinnan: Tietoja (kertoo yleisi‰ tietoja 
      pelist‰).</font></P>
      <P><font face="Arial Narrow">Valitsemalla Uusi peli, k‰ytt‰j‰ voi aloittaa 
      uuden ristinollapelin. Valinnan seurauksena n‰ytˆlle avautuu uusi ikkuna, 
      jossa voi muuttaa luotavan pelin asetuksia. Muutettavia asetuksia ovat 
      rasti- ja rengaspelaajan tyyppi sek‰ pelikent‰n leveys ja korkeus. 
      Pelaajatyyppej‰ on kolme: Ihminen, Reiska Random ja Niilo Neuvokas. 
      Ihminen edustaa ihmispelaajaa, Reiska Random t‰ysin satunnaisesti pelaavaa 
      teko‰ly‰ ja Niilo Neuvokas kohtalaisesti pelaavaa teko‰ly‰. Leveys- ja 
      korkeuskent‰t m‰‰ritt‰v‰t pelikent‰n koon. Minimiss‰‰n kenttien arvojen on 
      oltava 5 ja maksimissaan 50.</font></P>
      <P><font face="Arial Narrow">Avaa peli-valinta k‰ynnist‰‰ ruudulle 
      hakemistopuun sis‰lt‰v‰n ikkunan. K‰ytt‰j‰n valittua haluamansa tiedoston, 
      ohjelma yritt‰‰ avata sen. Jos avaaminen onnistuu, tulostuu n‰ytˆlle 
      lista, joka sis‰lt‰‰ tiedostoon tallennetut pelit. Kun k‰ytt‰j‰n on listasta 
      valinnut haluamansa pelin ja painanut Avaa-nappia, sulkeutuu avaamisikkuna 
      ja valitun pelin tilanne viimeisen siirron kohdalta tulostuu p‰‰ikkunaan.</font></P>
      <P><font face="Arial Narrow">Tallenna peli-valinnalla p‰‰ikkunassa oleva 
      peli voidaan tallettaa haluttuun tiedostoon. Valinnan seurauksena avautuu 
      hakemistopuun sis‰lt‰v‰ ikkuna, josta k‰ytt‰j‰ voi valita 
      tallennustiedoston. Jos valittu tiedosto on toimiva 
      ristinollapelitiedosto, tai jos k‰ytt‰j‰ erillisen v‰likysymyksen j‰lkeen 
      valitsee tallettavansa pelin tiedostoon siit‰ huolimatta, ett‰ se ei ole 
      toimiva ristinollapelitiedosto, tulostuu n‰ytˆlle ikkuna, jossa kysyt‰‰n 
      pelaajien nimi‰. K‰ytt‰j‰n muutettua nimet haluamansa muotoon ja valittua 
      Tallenna, ohjelma tallettaa pelin tiedostoon.</font></P>
      <P><font face="Arial Narrow">Lopeta-valinta yksinkertaisesti sulkee pelin.
      </font></P>
      <P><font face="Arial Narrow">P‰‰ikkunassa on yll‰ mainittujen toimintojen 
      lis‰ksi tekstikentt‰, joka kertoo pelin tilan. Pelin ollessa k‰ynniss‰ 
      kentt‰ on tyhj‰, muulloin siin‰ lukee, pelin lopputuloksesta riippuen 
      &quot;Rasti voittaa&quot;, &quot;Rengas voittaa&quot; tai &quot;Tasapeli&quot;. </font></P>
      <H3>&nbsp;</H3>
      <H3><font face="Arial Narrow">Ohjelman rakenne</font></H3>
      <p><font face="Arial Narrow">Peli voidaan jakaa sis‰lt‰miens‰ luokkien 
      perusteella kolmeen osakokonaisuuteen: pelin tietorakenteet, 
      tiedostonk‰sittely ja k‰yttˆliittym‰.</font></p>
      <h4><font face="Arial Narrow">Pelin tietorakenteet</font></h4>
      <p><font face="Arial Narrow">Pelin tietorakenteet osakokonaisuus sis‰lt‰‰ 
      seuraavat luokat: Koordinaatit, Siirto, Pelikentta, Pelaaja, Ihmispelaaja, 
      PelaajaReiskaRandom, PelaajaNiiloNeuvokas, Ristinollapeli ja Ristinolla.</font></p>
      <p><font face="Arial Narrow">Koordinaatit-luokka kuvaa tason 
      koordinaatteja (x,y) ja sis‰lt‰‰ yksinkertaisia metodeja niiden 
      manipuloimiseksi. Siirto-luokka on Koordinaatit-luokan triviaali 
      aliluokka, joka kuvaa yht‰ rastin tai renkaan paikkaa, eli yht‰ 
      ristinollapelin siirtoa. Erillisen Siirto-luokan luominen pelin siirtojen 
      kuvaamiseen, koordinaattiparien k‰ytt‰misen sijasta, on perusteltua, koska 
      se auttaa selkeytt‰m‰‰n ohjelmakoodia, erottaen ne kohdat, joissa on kyse 
      koordinaateista niist‰, joissa on kyse jonkun pelaajan siirroista.</font></p>
      <p><font face="Arial Narrow">Pelikentta kuvaa ruudukkoa, jossa 
      ristinollapeli pelataan. Luokassa kutakin ruutua edustaa char-arvo, joka voi olla 
      'x', 'o' tai ' ' vastaten rastia, rengasta tai tyhj‰‰ ruutua. Itse 
      ruudukkoa edustaa char[][]-taulukko. Olisi ollut mahdollista luoda
      erillinen luokka kuvaamaan yht‰ pelikent‰n ruutua, mutta t‰ss‰
      tapauksessa char-arvojen k‰yttˆ on toimivampi ratkaisu, koska se
      mahdollistaa peliruudukon rivien, sarakkeiden ja diagonaalien
      suoraviivaisen muuttamisen String-olioiksi - seikka, johon l‰hes kaikki
      pelin algoritmit nojaavat. Pelikentta-luokka sis‰lt‰‰ muun muassa 
      metodit ruutujen arvojen tutkimiseksi ja asettamiseksi sek‰ joitain 
      erikoistuneempia metodeja. </font></p>
      <p><font face="Arial Narrow">Pelaaja on abstrakti luokka, joka kuvaa 
      pelaajan yleisi‰ ominaisuuksia (nimi, pelimerkki, ym.). Se sis‰lt‰‰ 
      muutamia valmiiksi toteutettuja metodeja ja abstraktin metodin 
      mietiSiirto():Siirto, joka sen aliluokkien t‰ytyy toteuttaa. Juuri metodin 
      mietiSiirto():Siirto erilainen toteutus mahdollistaa eri pelaajatyyppien 
      luomisen.</font></p>
      <p><font face="Arial Narrow">Ihmispelaaja, PelaajaReiskaRandom ja 
      PelaajaNiiloNeuvokas ovat Pelaaja-luokan aliluokkia. Niist‰ kukin 
      m‰‰ritt‰‰ oman toteutuksensa mietiSiirto()-metodille.</font></p>
      <p><font face="Arial Narrow">Ristinollapeli-luokka kuvaa yht‰ 
      ristinollapeli‰ (pelaajat, pelikentt‰, jne.) ja on pelirungon keskeisin 
      luokka. Se vastaa pelaajien ja pelikent‰n kommunikaatiosta sek‰ pelin 
      rungon puolesta siit‰, ett‰ k‰ytt‰j‰ voi halutessaan kelata siirtoja eteen 
      ja taakse pelikent‰n p‰ivittyess‰ vastaavasti. Ristinollapeli-luokka 
      sis‰lt‰‰ metodit paivitaPelinTila():void ja kerroPelinTila():int, joiden 
      avulla saadaan tietoon pelattavan pelin nykyinen tila (k‰ynniss‰, rasti 
      voittaa, rengas voittaa tai tasapeli).</font></p>
      <p><font face="Arial Narrow">Luokka Ristinolla edustaa koko peli‰ ja sis‰lt‰‰ pelk‰n
      main()-metodin. Sen teht‰v‰ rajoittuu pelin k‰yttˆliittym‰n k‰ynnist‰miseen.</font></p>
      <h4><font face="Arial Narrow">Tiedostonk‰sittely</font></h4>
      <p><font face="Arial Narrow">Tiedostonk‰sittely sis‰lt‰‰ luokat: 
      RistinollapelitiedostonLukija, RistinollapelitiedostonKirjoittaja ja 
      KelvotonRistinollapelitiedosto.</font></p>
      <p><font face="Arial Narrow">RistinollapelitiedostonLukija-luokan avulla 
      voidaan lukea ristinollapelitiedostoja (tiedoston muoto on selitetty 
      kohdassa Tietorakenteet). Sen t‰rkein metodi on luePelit():Arraylist, joka 
      antaa palautusarvona ArrayList-olion, joka sis‰lt‰‰ tiedostossa olevat
      pelit Ristinollapeli-oliona.</font></p>
      <p><font face="Arial Narrow">RistinollapelitiedostonKirjoittaja-luokka 
      mahdollistaa pelien tallentamisen tiedostoon. Metodilla 
      tallenna(Ristinollapeli peli):void, haluttu peli voidaan tallentaa 
      tiedoston loppuun.</font></p>
      <p><font face="Arial Narrow">KelvotonRistinollapelitiedosto on 
      Exception-luokan aliluokka, joka kuvaa poikkeustilanteita, joissa 
      k‰sitelt‰v‰n tiedoston muoto on virheellinen.</font></p>
      <h4><font face="Arial Narrow">K‰yttˆliittym‰</font></h4>
      <p><font face="Arial Narrow">K‰yttˆliittym‰ sis‰lt‰‰ luokat: Paaikkuna, 
      Ruutunappi, RuutunappienKuuntelija, UusiPeliIkkuna, AvaaPeliIkkuna ja 
      TallennaPeliIkkuna. T‰m‰n lis‰ksi edell‰ mainittuihin luokkiin sis‰ltyy 
      joukko sis‰luokkia, jotka ovat tapahtumankuuntelijoita.&nbsp; </font></p>
      <p><font face="Arial Narrow">Paaikkuna on pelin toiminnan kannalta t‰rkein 
      luokka. Se vastaa pelin toimimisesta k‰ytt‰j‰n komentojen mukaisesti, ja 
      sen alaisuudessa toimivat kaikki muut pelin luokat Ristinolla-luokkaa 
      lukuun ottamatta. K‰yttˆliittym‰ss‰ Paaikkuna-luokka kuvaa pelin 
      p‰‰ikkunaa ja perii JFrame-luokan. Se sis‰lt‰‰ nappiruudukon, joka koostuu 
      Ruutunappi-olioista, 'Siirto eteen'- ja 'Siirto taakse'- napit, 
      tekstikent‰n ja yl‰valikon. Paaikkuna-luokan t‰rkein metodi on 
      paivitaPelitilanne():void, joka p‰ivitt‰ pelin tilan ja graafisen 
      k‰yttˆliittym‰n komponentit uutta tilannetta vastaaviksi ja siirt‰‰ vuoron 
      seuraavalle pelaajalle kutsumalla Pelaaja-olion 
      mietiSiirto():Siirto-metodia.</font></p>
      <p><font face="Arial Narrow">Ruutunappi-luokka on JButton-luokan aliluokka 
      ja kuvaa k‰yttˆliittym‰ss‰ yht‰ ristinollaruudukon nappia. Pelkk‰ valmiin 
      JButton-luokan k‰yttˆ kuvaamaan ruudukon nappeja ei riit‰, koska nappien 
      on osattava kertoa sijaintinsa ruudukossa, jos tarve vaatii. Suurimpana
      erona 
      JButton-luokkaan onkin se, ett‰ jokainen Ruutunappi-olio sis‰lt‰‰
      tiedon sen omasta paikasta peliruudukossa.</font></p>
      <p><font face="Arial Narrow">RuutunappienKuuntelija-luokka toteuttaa 
      ActionListener-rajapinnan ja vastaa peliruudukon Ruutunappien painallusten 
      kuuntelemisesta Paaikkuna-luokan alaisuudessa. Se kuuntelee samalla kertaa 
      kaikkia ruudukon nappeja ja vastaa tarvittavien metodien, kuten ja 
      Pelaaja-luokan siirra()-metodin ja Paaikkuna-luokan 
      paivitaPelitilanne()-metodin, kutsumisesta, jos jotain ruudukon nappia 
      painetaan. Syy mink‰ takia Ruutunappien painallusten kuuntelemista ei voi 
      toteuttaa sis‰luokilla, vaan on luotava erillinen tapahtumankuuntelija, on 
      se, ett‰ peliruudukon koko vaihtelee pelist‰ toiseen.</font></p>
      <p><font face="Arial Narrow">UusiPeliIkkuna-luokka, joka on JDialog-luokan 
      aliluokka, kuvaa ikkunaa, jossa k‰ytt‰j‰ syˆtt‰‰ uuden pelin tiedot 
      tietokoneelle. Paaikkuna-luokka luo uuden UusiPeliIkkuna-olion ja pist‰‰ 
      sen n‰kyviin siin‰ tapauksessa, ett‰ k‰ytt‰j‰ on valikosta valinnut kohdan 
      Uusi peli. UusiPeliIkkuna luo k‰ytt‰j‰n syˆtteen perusteella uuden 
      Ristinollapeli-olion ja antaa sen Paaikkuna-luokalle jatkotoimenpiteit‰ 
      varten. </font></p>
      <p><font face="Arial Narrow">AvaaPeliIkkuna edustaa ikkunaa, jossa 
      k‰ytt‰j‰ voi valita tiedoston sis‰lt‰mist‰ peleist‰ mieleisens‰ 
      avattavaksi. JFileChooser-luokan ilmentym‰ll‰ siis valitaan haluttu 
      tiedosto, jonka j‰lkeen se l‰hetet‰‰n AvaaPeliIkkuna-oliolle, joka 
      sis‰lt‰‰ RistinollapeliLukija-olion, joka vastaa tiedoston lukemisesta. 
      AvaaPeliIkkuna-olio tulostaa tiedoston pelit n‰ytˆlle, ja k‰ytt‰j‰n tehty‰ 
      valintansa, se l‰hett‰‰ valitun Ristinollapeli-olion sit‰ kutsuneelle 
      Paaikkuna-oliolle. AvaaPeliIkkuna perii JDialog-luokan.</font></p>
      <p><font face="Arial Narrow">TallennaPeliIkkuna kuvaa ikkuna, jossa 
      k‰ytt‰j‰, kirjoitettuaan ensin tekstikenttiin pelaajien nimet, voi 
      tallentaa k‰ynniss‰ olevan pelin. TallennaPeliIkkuna-luokka sis‰lt‰‰ 
      RistinollapelitiedostonKirjoittaja-olion, jonka avulla tiedostoon 
      kirjoittaminen tapahtuu. TallennaPeliIkkuna perii JDialog-luokan.</font></p>
      <p><font face="Arial Narrow">Alla olevassa kuvassa luokkarakenne on
      esitetty UML-kaavion avulla (ruskea = pelin tietorakenteet, sininen =
      k‰yttˆliittym‰ ja vihre‰ = tiedostonk‰sittely).&nbsp;</font></p>
      <P align="center"><img border="0" src="UML.gif" width="735" height="525"></P>
      <H3><font face="Arial Narrow">Algoritmit</font></H3>
      <p><font face="Arial Narrow">Peliss‰ on k‰ytet‰‰n kahta algoritmia, jotka 
      ovat: pelin lopputuloksen m‰‰ritt‰minen ja tietokoneen teko‰ly.</font></p>
      <h4><font face="Arial Narrow">Pelin lopputuloksen m‰‰ritt‰minen</font></h4>
      <p><font face="Arial Narrow">Pelin lopputuloksen m‰‰ritt‰minen alkaa 
      sill‰, ett‰ peliruudukon rivit, sarakkeet ja diagonaalit (kahteen eri 
      suuntaan) muutetaan merkkijonoiksi. N‰ist‰ merkkijonoista etsit‰‰n ensin 
      viiden per‰kk‰isen rastin- ja renkaan jonoa. Mik‰li sellainen lˆytyy 
      julistetaan toinen pelaajista voittajaksi. Sen tutkimiseksi onko peli 
      tasapeli etsit‰‰n riveilt‰, sarakkeilta ja diagonaaleilta ensin viiden 
      per‰kk‰isen tyhj‰n merkin jonoa. Jos sellainen lˆytyy, on ainakin 
      teoriassa viel‰ mahdollista, ett‰ toinen pelaajista saa viiden suoransa 
      valmiiksi (eli peli ei ole viel‰ p‰‰ttynyt). Mik‰li viiden tyhj‰n merkin jonoa ei lˆydy, siirryt‰‰n 
      seuraavaan vaiheeseen, jossa vuorotellen korvataan tyhj‰t ruudut rasteilla 
      ja renkailla ja tutkitaan, ett‰ muodostuuko johonkin viiden suoraa. Mik‰li 
      viiden suoraa ei kummankaan pelaajan tapauksessa muodostu, on peli tasapeli.</font></p>
      <h4><font face="Arial Narrow">Tietokoneen teko‰ly</font></h4>
      <p><font face="Arial Narrow">Peliss‰ on kaksi tietokonevastustajaa: Reiska 
      Random ja Niilo Neuvokas. Reiska Random valitsee siirtonsa satunnaisesti 
      ja ei siis ole varsinaisesti teko‰ly. Niilo Neuvokas k‰ytt‰‰ siirron 
      lˆyt‰miseen merkkiyhdistelmien tunnistamiseen ja niiden arvottamiseen 
      perustuvaa algoritmia. Algoritmin perusidea on antaa eri 
      merkkiyhdistelmille (esim. &quot;_xxx_&quot; ja &quot;xx__&quot;) niiden tavoiteltavuutta 
      kuvaavat kokonaislukuarvot eli hyˆtyarvot. Mit‰ suurempi hyˆtyarvo sen parempi ja 
      tavoiteltavampi yhdistelm‰. Koko algoritmi voidaan jakaa, alemman tason 
      toiminnoista ylempiin liikuttaessa, seuraaviin osa-algoritmeihin: 
      yksitt‰isen siirron hyˆtyarvon m‰‰ritt‰minen, hyˆtyarvomatriisin 
      laskeminen ja siirron valitseminen.</font></p>
      <p><font face="Arial Narrow">Yksitt‰isen siirron hyˆtyarvoa m‰‰ritett‰ess‰ 
      muutetaan ensin siirtoa vastaavan ruudun rivi, sarake ja diagonaalit - 
      siirron vaikutus alue - merkkijonoiksi tietylle et‰isyydelle asti (esim. 
      viiden ruudun p‰‰h‰n). T‰m‰n j‰lkeen etsit‰‰n saaduista merkkijonoista 
      yhdistelmi‰, kuten &quot;MMMM_&quot;, &quot;_MM__&quot; tai &quot;__M__&quot; (M = pelaajan merkki). 
      Aina kun joku ennalta m‰‰ritetyist‰ yhdistelmist‰ lˆytyy, lis‰t‰‰n sit‰ 
      vastaava hyˆtyarvo muuttujaan, joka edustaa kokonaishyˆtyarvoa. T‰ll‰ 
      tavalla lasketaan tilanteelle hyˆtyarvot ennen ja j‰lkeen merkin lis‰yksen 
      katsoen tilannetta vuoroin omalta, vuoroin vastustajan kannalta. Ottamalla 
      erotus alku- ja lopputilanteiden hyˆtyarvojen v‰lill‰ saadaan hyˆtyarvon 
      muutos. Hyˆtyarvon muutos lasketaan molempien pelaajien kannalta erikseen. 
      T‰m‰n j‰lkeen siirron hyˆtyarvo saadaan yht‰lˆst‰: (hyˆtyarvon muutos 
      omalta kannalta) - (hyˆtyarvon muutos vastustajan kannalta).</font></p>
      <p><font face="Arial Narrow">Seuraava askel algoritmissa on 
      hyˆtyarvomatriisin laskeminen. Hyˆtyarvomatriisi on kaksiulotteinen 
      kokonaislukutaulukko, joka on pelikent‰n kokoinen, ja joka sis‰lt‰‰ 
      jokaista mahdollista siirtoa vastaavat hyˆtyarvot. Hyˆtyarvomatriisi 
      muodostetaan laskemalla jokaiselle mahdolliselle siirrolle hyˆtyarvo ja 
      sijoittamalla se siirtoa vastaavaan kohtaan kaksiulotteisessa taulukossa.</font></p>
      <p><font face="Arial Narrow">Algoritmin viimeinen vaihe on siirron 
      valitseminen. Siin‰ lasketaan hyˆtyarvomatriisi omalle siirrolle 
      nykyisess‰ tilanteessa ja hyˆtyarvomatriisi vastustajan siirrolle 
      nykyisess‰ tilanteessa. Kun omasta - ja vastustajan hyˆtyarvomatriisista 
      valitaan suurimmat arvot saadaan hyˆkk‰yshyˆty ja puolustushyˆty. 
      Hyˆkk‰yshyˆty kertoo suurimman hyˆdyn, joka seuraa oman pelin 
      rakentamisesta; puolustushyˆty kertoo vastaavasti suurimman hyˆdyn joka 
      koituu vastustajan siirron est‰misest‰. Koska vastustaja uhkaa tehd‰ 
      siirtonsa vasta vuoron p‰‰st‰, ei hyˆkk‰yshyˆty ja puolustushyˆty eiv‰t 
      ole suoraan verrattavissa. T‰m‰n tosiasian huomioon ottamiseksi teko‰lyyn 
      on sis‰llytetty vakio PUOLUSTUSSIIRRON_HEIKENNYSKERROIN (v‰lilt‰ 0...1), 
      jolla puolustushyˆty kerrotaan, jotta siit‰ saataisiin vertailukelpoinen 
      hyˆkk‰yshyˆtyyn n‰hden. Kun puolustushyˆty on kerrottu 
      heikennyskertoimella, suoritetaan teko‰lyalgoritmin viimeinen vaihe, jossa 
      saatua puolustushyˆty‰ verrataan hyˆkk‰yshyˆtyyn. Jos puolustushyˆty on 
      suurempi valitaan siihen johtanut siirto, jos taas hyˆkk‰ysetu on suurempi 
      valitaan sit‰ vastaava siirto.</font></p>
      <p><font face="Arial Narrow">On olemassa yksi poikkeustilanne, jolloin 
      teko‰ly ei k‰yt‰ yll‰ kuvattua algoritmia siirron m‰‰ritt‰miseen. T‰m‰ 
      tilanne on pelin alku, jolloin pelikentt‰ on tyhj‰ eik‰ siit‰ voi saada mit‰‰n tietoa. T‰ss‰ tapauksessa teko‰ly arpoo satunnaisen 
      siirron pelikent‰n keskikohdan l‰helt‰.&nbsp;&nbsp; </font></p>
      <H3><font face="Arial Narrow">Tietorakenteet</font></H3>
      <p><font face="Arial Narrow">Pelin t‰rkein tietorakenne on peliruudukko, 
      joka on toteutettu kaksiulotteisena char-taulukkona. N‰in voidaan tehd‰, 
      koska pelikent‰n leveys ja korkeus eiv‰t muutu pelin aikana. Dynaamisia 
      tietorakenteita k‰ytet‰‰n ohjelmassa yhteyksiss‰, joissa ei ole tietoa alkioiden kokonaism‰‰r‰st‰. T‰llˆin on 
      poikkeuksetta tukeuduttu Javan ArrayList-luokkaan. Ainoa itse luotu 
      tietorakenne on peliss‰ k‰sitelt‰vien ristinollapelitiedostojen muoto. 
      Ristinollapelitiedosto on tekstitiedosto ja sen tieto on niiss‰ esitetty 
      seuraavalla tavalla:</font></p>
      <p><font face="Arial Narrow">rastipelaajan nimi</font></p>
      <p><font face="Arial Narrow">rastipelaajan tunniste (m‰‰ritt‰‰ mink‰ 
      tyyppinen pelaaja on kyseess‰ - ihminen vai joku tietokonepelaajista)&nbsp;&nbsp;
      </font></p>
      <p><font face="Arial Narrow">rengaspelaajan nimi</font></p>
      <p><font face="Arial Narrow">rengaspelaajan tunniste</font></p>
      <p><font face="Arial Narrow">pelikent‰n leveys</font></p>
      <p><font face="Arial Narrow">pelikent‰n korkeus</font></p>
      <p><font face="Arial Narrow">(1,1) (rastin 1. siirto)</font></p>
      <p><font face="Arial Narrow">(2,4) (renkaan 1. siirto)</font></p>
      <p><font face="Arial Narrow">(3,5)</font></p>
      <p><font face="Arial Narrow">..... (rastin ja renkaan siirtoja 
      vuorotellen)</font></p>
      <p><font face="Arial Narrow">---------------- (Erotinrivi, joka erottaa 
      kaksi peli‰ toisistaan)</font></p>
      <p><font face="Arial Narrow">rastipelaajan nimi (jossain toisessa peliss‰, 
      joka on tallennettu samaan tiedostoon)</font></p>
      <p><font face="Arial Narrow">..... jne. </font></p>
      <p>&nbsp;</p>
      <p><font face="Arial Narrow">Yksi ristinollapelitiedosto voi siis sis‰lt‰‰ 
      mielivaltaisen m‰‰r‰n pelej‰, kunhan ne on kuvattu yll‰ esitetyss‰ 
      muodossa.</font></p>
      <H3>&nbsp;</H3>
      <H3><font face="Arial Narrow">Poikkeamat suunnitelmasta</font></H3>
      <P><font face="Arial Narrow">Suurin poikkeus alkuper‰isest‰ suunnitelmasta 
      on se, ett‰ Ristinolla-luokasta ei tullut pelin luokkakokonaisuuden 
      kannalta keskeisin luokka. Alkuper‰isess‰ suunnitelmassa juuri sen piti 
      olla muut luokat yhteen nivova rakennuspala.
      Sen teht‰v‰ksi lopullisessa versiossa j‰i vain Paaikkuna-olion luominen
      ja sen sen laittaminen ruudulla n‰kyv‰ksi. Pelirungon keskeisimm‰ksi
      luokaksi nousi Ristinollapeli. Koko pelin p‰‰luokaksi nousi
      k‰yttˆliittym‰n keskeisin osa Paaikkuna-luokka. Syy luokkarakenteen
      muuttumiseen on se, ett‰ Ristinolla-luokkaa ei tarvittu pelirungossa,
      eik‰ myˆsk‰‰n k‰yttˆliittym‰n puolella. Suunnitelmaa tehdess‰
      allekirjoittaneelle ei ollut selv‰‰ miten graafinen k‰yttˆliittym‰
      rakennetaan Javassa. J‰lkiviisaasti ajatellen se, ett‰
      k‰yttˆliittym‰n p‰‰luokka Paaikkuna nousi pelin osakokonaisuudet
      yhdist‰v‰ksi luokaksi, on varsin luontevaa; Javalla k‰yttˆliittym‰‰
      luotaessa se useimmiten toimivin ratkaisu.</font></P><P><font face="Arial Narrow">Allekirjoittaneen
      kokemuksen puute graafisen k‰yttˆliittym‰n laatimisesta n‰kyi edell‰
      mainitun seikan lis‰ksi myˆs siin‰, ett‰ valmiissa ohjelmassa on
      huomattavasti enemm‰n k‰yttˆliittym‰‰n liittyvi‰ luokkia
      kuin oli suunniteltu. Tyˆn edetess‰ t‰ytyi luoda luokat, jotka
      mahdollistivat k‰yttˆliittym‰n puolelta mm. pelien lataamisen ja
      tallentamiseen, sek‰ kuuntelijaluokka ja erillinen Ruutunappi-luokka,
      jotka tekiv‰t mahdolliseksi peliruudukon toiminnan.</font></P><P><font face="Arial Narrow">Teko‰lyn
      laatiminen eteni suurelta osin alkuper‰isen suunnitelman suuntalinjoja
      pitkin, mutta ei t‰ysin. Alkuper‰isess‰ suunnitelmassa teko‰lyn
      yhteydess‰ tarvittavat hyˆtyarvot toteutettiin desimaalilukuina.
      Lopullisessa ohjelmassa ne olivat kuitenkin kokonaislukuja. T‰m‰ muutos
      tehtiin sen takia, ett‰ kokonaislukujen k‰sittely k‰y tietokoneelta
      huomattavasti nopeammin kuin liukulukujen.</font></P><P><font face="Arial Narrow">
      Suunniteltuun tiedostomuotoon jouduttiin tekem‰‰n muutama muutos. 
      Pelaajille piti lis‰t‰ erilliset tunnisteet, jotta saadaan tietoon 
      pelaajan tyypit. Tiedostomuoto mahdollistaa lopullisessa versiossa myˆs 
      monen pelin tallentamisen samaan tiedostoon, toisin kuin suunnitelmassa.</font></P><P><font face="Arial Narrow">Aikataulussa
      ei t‰ysin pysytty, koska oli opeteltava paljon uutta asiaa, ja koska
      dokumentin kirjoittamiseen ja viimeistelyyn kului yll‰tt‰v‰n paljon
      aikaa. Tyˆntekoon k‰ytetty tuntim‰‰r‰ oli 8h enemm‰n kuin
      suunnitelmassa, eli yhteens‰
      80h.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></P>
      <H3>&nbsp;</H3>
      <H3><font face="Arial Narrow">Arvio lopputuloksesta</font></H3>
      <p><font face="Arial Narrow">Olen kokonaisuutena hyvin tyytyv‰inen 
      saavuttamaani lopputulokseen. Ohjelma toteuttaa mielest‰ni teht‰v‰nannon 
      m‰‰rittelem‰t kriteerit. Graafisesta k‰yttˆliittym‰st‰ tuli selke‰ ja 
      k‰ytett‰vyydelt‰‰n siedett‰v‰, vaikka en k‰ytt‰j‰yst‰v‰llisyytt‰ 
      ensisijaisesti l‰htenytk‰‰n tavoittelemaan. Tietokoneen teko‰lyst‰kin tuli 
      yll‰tt‰v‰n hyv‰ - se pystyy ajoittain pist‰m‰‰n keskivertopelaajan (tai 
      ainakin minut) tiukoille.</font></p>
      <p><font face="Arial Narrow">K‰ytt‰m‰‰ni luokkarakenteeseenkin olen 
      tyytyv‰inen, enk‰ muuttaisi mit‰‰n, jos tyˆ pit‰isi aloittaa alusta. Peli 
      on helposti laajennettavissa vaikkapa uusilla tietokonevastustajilla. 
      Uuden tietokonevastustajan luomiseksi k‰ytt‰j‰n t‰ytyy vain m‰‰ritell‰ 
      uusi toteutus Pelaaja-luokan mietiSiirto()-metodille. Kaiken kaikkiaan 
      uskon hyv‰n luokkarakenteen eheyden olevan ohjelmoinnin ohella tehdyn 
      jatkuvan suunnittelun tulos.</font></p>
      <p><font face="Arial Narrow">On ohjelmassa kuitenkin lˆydett‰viss‰ 
      erin‰isi‰ puutteita. Puutteita lˆytyy l‰hinn‰ k‰yttˆliittym‰n puolelta, 
      jossa esimerkiksi, peli‰ avattaessa tai tallennettaessa avautuva, Javan 
      Swing luokkakirjastossa valmiiksi toteutettu, tiedoston valitsija on 
      englanninkielinen, vaikka muu k‰yttˆliittym‰ on toteutettu suomeksi. Olisi 
      myˆs ollut mahdollista ja k‰ytt‰j‰n kannalta mukavaa, tiedoston valitsijan 
      yhteyteen olisi luotu ns. tiedostofiltteri .xo-p‰‰tteisille tiedostoille 
      ristinollapelitiedostojen lˆyt‰misen helpottamiseksi. </font></p>
      <p><font face="Arial Narrow">Itse koen pelin suurimmaksi puutteeksi, jos 
      peli‰ ei tarkastella arvostelukriteerien valossa, riitt‰m‰ttˆm‰n 
      tietokonevastustajan. Suuri parannus olisi muun muassa se, ett‰ tietokone 
      analysoisi tilannetta myˆs kun k‰ytt‰j‰ miettii omaa siirtoaan - t‰m‰n 
      voisi toteuttaa Javan s‰ikeill‰. Tulevaisuudessa aionkin, jos pelin kehitt‰mist‰ 
      jatkan, panostaa teko‰lyalgoritmin kehittelyyn. </font></p>
      <p>&nbsp;</p>
      <H3><font face="Arial Narrow">Viitteet</font></H3>
      <p><font face="Arial Narrow">Kirjallisuus:</font></p>
      <ul>
        <li><font face="Arial Narrow">Arto Wikla: Ohjelmoinnin perusteet 
        Java-kielell‰, OtaDATA 1998.</font></li>
        <li><font face="Arial Narrow">Luentomateriaali</font></li>
      </ul>
      <p><font size="3" face="Arial Narrow">WWW-sivut:</font></p>
      <ul>
        <li><a href="http://www.cs.hut.fi/Docs/Eckel/TIJ3ed/TIJ3.htm"><font size="3" face="Arial Narrow">Bruce
          Eckelin: 'Thinking in Java¥</font></a>
        <li><a href="http://java.sun.com/j2se/1.3/docs/api/"><font size="3" face="Arial Narrow">Java
          API:n luokkien kuvaukset</font></a>
        <li><a href="http://java.sun.com/docs/books/tutorial/uiswing/"><font size="3" face="Arial Narrow">Sunin
          Swing-luokkakirjaston k‰yttˆohjeet</font></a></li>
        <li><font face="Arial Narrow"><a href="http://developer.java.sun.com/developer/codesamples/examplets/index.html">Examplets
          from The Java Developers Almanac 2000</a></font></li>
        <li><a href="http://www.ibiblio.org/javafaq/javafaq.html"><font face="Arial Narrow">The
          comp.lang.java FAQ List</font></a></li>
        <li><a href="http://www.hut.fi/~tsarvi/xosuunni.htm"><font face="Arial Narrow">Alkuper‰inen
          suunnitelma</font></a></li>
      </ul>
      <H3>&nbsp;</H3>
      <H3><font face="Arial Narrow">Liitteet</font></H3>
      <ul>
        <li><a href="http://www.hut.fi/~tsarvi/koodi/">Ohjelman l‰hdekoodi</a></li>
        <li><a href="http://www.hut.fi/~tsarvi/javadoc/index.html">Luokista 
        generoitu Javadoc-dokumentaatio</a></li>
      </ul>
    </TD></TR></TBODY></TABLE></BODY></HTML>